<extend name="Public:default" />
<block name="container">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <div class="widget-box">
                    <div class="widget-title">
                        <span class="icon">
                            <i class="icon-th"></i>
                        </span>
                        <h5>节点列表</h5>
                    </div>
                    <form action="{:U('setAccess')}" method="post" name="fom">
                        <div class="widget-content nopadding" id="wrap">
                            <a href="{:U('index')}" class="btn btn-inverse btn-mini">返回</a>
                            <!-- <volist name="list" id="app"> -->
                                <div class="app">
                                    <p>
                                        <strong>{$app.title}</strong>
                                        <input type="checkbox" name="access[]" value="{$app.id}_1" level='1' <if condition='$app["access"]'>checked='checked'</if> />
                                    </p>

                                    <!-- <volist name="app.child" id="action"> -->
                                        <dl>
                                            <dt>
                                                <strong>{$action.title}</strong>
                                                <input type="checkbox" name="access[]" value="{$action.id}_2" level='2' <if condition='$action["access"]'>checked='checked'</if>/>
                                            </dt>
                                            <!-- <volist name='action.child' id='method'>  -->
                                                <dd>
                                                    <span>{$method.title}</span>
                                                    <input type="checkbox" name="access[]" value="{$method.id}_3" level='3' <if condition='$method["access"]'>checked='checked'</if>/>
                                                </dd>
                                            <!-- </volist> -->
                                        </dl>
                                    <!-- </volist> -->
                                </div>
                            <!-- </volist> -->
                        </div>
                        <input type="hidden" name="rid" value="{$rid}"/>
                        <input type="submit" name="submit" value="保存" class="btn btn-primary" style="display:block;margin:20px auto;"/>
                    </form>
                </div>
            </div>
        </div>
    </div>
</block>
<block name="js">
    <script>
        $(function(){
            $('input[level=1]').click(function() {
                var inputs = $(this).parents('.app').find('input');
                $(this).attr('checked') ? inputs.attr('checked','checked') : inputs.removeAttr('checked');
            });
            $('input[level=2]').click(function() {
                var inputs = $(this).parents('dl').find('input');
                $(this).attr('checked') ? inputs.attr('checked','checked') : inputs.removeAttr('checked');
            });
        });
    </script>
</block>